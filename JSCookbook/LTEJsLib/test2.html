<html>
	<head>
		<title>LTEJsLib Unit Tests</title>
		<script language="javascript" type="text/javascript" src="JSUnitTesting.js"></script>
		<script language="javascript" type="text/javascript" src="TestCollection.js"></script>
		<script language="javascript" type="text/javascript" src="UnitTest.js"></script>
		<script language="javascript" type="text/javascript" src="AssertionResult.js"></script>
		<script language="javascript" type="text/javascript" src="Assert.js"></script>
		<script language="javascript" type="text/javascript">
function reportArray(heading, values) {
	var s = heading;
	for(var n in values)
		s = s + n + ' = ' + values[n] + '; ';
	alert(s);
}
function testCollectionInitialize(orderedTests, testCollection) {
	var contextObject = testCollection.getContextObject();
	contextObject.Second = "Two";
}
function testCollectionCleanup(orderedTests, testCollection) {
	var contextObject = testCollection.getContextObject();
}

function firstTestInitialize(unitTest, testCollection) {
	var contextObject = testCollection.getContextObject();
	contextObject.Fourth = "Four";
	JSUnitTesting.Assert.fail('What a failure', 55);
}
function firstUnitTest(unitTest, testCollection) {
	var contextObject = unitTest.getContextObject();
	reportArray("firstUnitTest called: ", contextObject);
	contextObject.Fifth = "Five";
	throw 'oh no';
}
function firstTestCleanup(unitTest, testCollection) {
	var contextObject = testCollection.getContextObject();
	reportArray("firstTestCleanup called: ", contextObject);
}

function secondTestInitialize(unitTest, testCollection) {
	var contextObject = testCollection.getContextObject();
	reportArray("secondTestInitialize called: ", contextObject);
	contextObject.Fourth = "Four";
}
function secondUnitTest(unitTest, testCollection) {
	var contextObject = unitTest.getContextObject();
	reportArray("secondUnitTest called: ", contextObject);
	contextObject.Seventh = "Seven";
	JSUnitTesting.Assert.fail('What a test', 5567);
}
function secondTestCleanup(unitTest, testCollection) {
	var contextObject = testCollection.getContextObject();
	reportArray("secondTestCleanup called: ", contextObject);
}

function runAllTests() {
	var unitTests = new JSUnitTesting.TestCollection({ First: "One" }, testCollectionInitialize, testCollectionCleanup);
	unitTests.addUnitTest(new JSUnitTesting.UnitTest(firstUnitTest, 1, 2, { Third: "Three" }, firstTestInitialize, firstTestCleanup));
	unitTests.addUnitTest(new JSUnitTesting.UnitTest(secondUnitTest, 2, 1, { Sixth: "Six" }, secondTestInitialize, secondTestCleanup));
	unitTests.runTests(true);
	var table = unitTests.getResultsTable();
	var div = document.getElementById("resultsContainer");
	if (div.children.length > 0)
		div.replaceChild(table, div.children[0]);
	else
		div.appendChild(table);
}
		</script>
	</head>
	<body>
		<button onclick="runAllTests()">Click me!</button>
		<div id="resultsContainer"></div>
	</body>
</html>
